<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Movie Ratings</title>
  <style>
    body {
      background-color: #121417;  /* very dark background */
      color: #ecf0f1;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0; padding: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
    }
    h1 {
      margin-top: 40px;
      font-size: 2.5rem;
      font-weight: 700;
    }
    h2 {
      margin-top: 40px;
      font-size: 1.5rem;  /* taille plus petite */
    }
    form {
      margin: 30px 0;
      display: flex;
      justify-content: center;
      width: 100%;
      max-width: 400px;
    }
    input[name="movie_name"] {
      flex-grow: 1;
      padding: 12px 15px;
      font-size: 1.2rem;
      border: none;
      border-radius: 5px 0 0 5px;
      outline: none;
    }
    input[type="submit"] {
      padding: 12px 20px;
      font-size: 1.2rem;
      border: none;
      background-color: #3498db;
      color: white;
      cursor: pointer;
      border-radius: 0 5px 5px 0;
      transition: background-color 0.3s ease;
    }
    input[type="submit"]:hover {
      background-color: #2980b9;
    }
    ul {
      list-style: none;
      padding: 0;
      margin: 0;
      max-width: 600px;
      width: 100%;
      font-size: 1.3rem;
      display: flex;
      justify-content: space-around;
      align-items: center;
      margin-bottom: 50px;
    }
    ul li {
        margin: 0 15px;
        display: flex;
        flex-direction: column;  /* stack logo and rating vertically */
        align-items: center;
        gap: 6px;
    }
    ul li img {
        width: 60px;    /* larger logos */
        height: auto;   /* keep aspect ratio */
        object-fit: contain; /* avoid distortion */
    }
    .rating-item {
        flex: 1 1 120px; /* wider min width */
        margin: 20px; /* more space between blocks */
    }
    .rating-item img {
        display: block;
        margin: 0 auto 15px;
        max-width: 80px;  /* bigger logos */
        height: auto;
    }
  </style>
</head>
<body>
  <h1>Search Movie Ratings</h1>
  <form method="post">
    <input type="text" name="movie_name" placeholder="Titre du film" value="{{ movie_name or '' }}" required>
    <input type="submit" value="Rechercher">

    {% if search_results %}
    <select name="imdb_id" onchange="this.form.submit()">
        <option value="">-- Choose a movie --</option>
        {% for movie in search_results %}
        <option value="{{ movie.imdbID }}">{{ movie.Title }} ({{ movie.Year }})</option>
        {% endfor %}
    </select>
    {% endif %}
  </form>
  
  {% if ratings %}
    <h2 style="font-size: 1.6rem; margin-top: 30px; text-align: center;">
        Results for "{{ movie_name }}" :
    </h2>

    <div style="display: flex; gap: 30px; max-width: 700px; margin-bottom: 40px; align-items: stretch; justify-content: center;">
        {% if poster_url and poster_url != "N/A" %}
        <img src="{{ poster_url }}" alt="Movie Poster" style="max-width: 300px; border-radius: 8px;">
        {% endif %}

        <div style="
            border: 3px solid #1f2733; /* bordure plus foncée */
            padding: 20px;
            background-color: #1f2733;
            color: #ecf0f1;
            max-width: 350px;
            font-size: 1.1rem;
            box-shadow: 2px 2px 10px rgba(0,0,0,0.7);
            
            /* coins biseautés */
            clip-path: polygon(
            10px 0%, calc(100% - 10px) 0%, 100% 10px, 
            100% calc(100% - 10px), calc(100% - 10px) 100%, 
            10px 100%, 0% calc(100% - 10px), 0% 10px
            );

            display: flex;
            flex-direction: column;
            justify-content: center;
        ">
        <p><strong>Year:</strong> {{ details.get('year', 'N/A') }}</p>
        <p><strong>Director:</strong> {{ details.get('director', 'N/A') }}</p>
        <p><strong>Cast:</strong> {{ details.get('actors', 'N/A') }}</p>
        </div>
    </div>
  {% endif %}

  
  {% if ratings %}
    <ul>
      <li>
        <img src="{{ url_for('static', filename='logos/letterboxd.png') }}" alt="Letterboxd">
        {{ letterboxd or "N/A" }}
      </li>
      <li>
        <img src="{{ url_for('static', filename='logos/imdb.png') }}" alt="IMDb">
        {{ ratings.get('Internet Movie Database', 'N/A') }}
      </li>
      <li>
        <img src="{{ url_for('static', filename='logos/rotten_tomatoes.png') }}" alt="Rotten Tomatoes">
        {{ ratings.get('Rotten Tomatoes', 'N/A') }}
      </li>
      <li>
        <img src="{{ url_for('static', filename='logos/metacritic.png') }}" alt="Metacritic">
        {{ ratings.get('Metacritic', 'N/A') }}
      </li>
    </ul>
  {% endif %}
  {% if average %}
  <p style="margin-top: 0px;margin-bottom: 100px; font-size: 1.3rem; font-weight: bold; text-align: center;">
    Average rating: {{ average }}/10
  </p>
{% endif %}
</body>
</html>